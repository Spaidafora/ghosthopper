<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ghost-hopper</title>
    <a href="http://localhost:8000/api/courses.php" class="btn btn-sm btn-primary">courses</a>
</head>
<style>
   body {
    margin: 0;
    background-color: #212121;
    font-family: 'Segoe UI', sans-serif;
    color: #ffffff;
}

nav > div {
    background-color: #CFE3E2;
    width: 100%;
    padding: 10px 0;
    text-align: center;
}

#logo {
    width: 200px;
    display: block;
    margin: 0 auto;
}

nav a {
    margin: 0 10px;
    text-decoration: none;
    color: #2e2e2e;
    background-color: #A9C9C8;
    padding: 6px 12px;
    border-radius: 5px;
    font-weight: bold;
    transition: background-color 0.2s ease-in-out;
}

nav a:hover {
    background-color: #89b1af;
}

form {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 30px;
}

.search input[type="text"] {
    width: 300px;
    padding: 10px;
    border-radius: 8px 0 0 8px;
    border: none;
    font-size: 16px;
    outline: none;
}

.search button {
    padding: 10px 16px;
    border: none;
    background-color: #A9C9C8;
    color: #2e2e2e;
    font-weight: bold;
    border-radius: 0 8px 8px 0;
    cursor: pointer;
    transition: background-color 0.2s ease-in-out;
}

.search button:hover {
    background-color: #89b1af;
}

#container {
    max-width: 1000px;
    margin: 40px auto;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    padding: 0 20px;
}

#container .container {
    background-color: #1a5e73;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
}

#container .container h2, #container .container h3 {
    color: #ffffff;
    margin-bottom: 10px;
}

#container .container p {
    margin: 5px 0;
    color: #e0e0e0;
    font-size: 14px;
}

#container .container a {
    display: inline-block;
    margin-top: 10px;
    background-color: #CFE3E2;
    color: #2e2e2e;
    padding: 6px 12px;
    text-decoration: none;
    border-radius: 5px;
    font-weight: bold;
}

#container .container a:hover {
    background-color: #a9c9c8;
}



</style>
<body>
    <nav>
        <div>
            <a href="http://localhost:8000/grid.php">
                <img src="/hopper.png" id="logo">

    
            </a>
        </div>
        
        <div>
            <a href="http://localhost:8000/courses.php" class="btn btn-sm btn-primary">courses</a>
            <a href="http://localhost:3000/" class="btn btn-sm btn-primary">search</a>
            <a href="http://localhost:8000/grid.php" class="btn btn-sm btn-primary">home</a>
            
    </nav>

    
    <form> 
        
        <div class="search"> 
            <input type="text" id="search" placeholder="Search for a course..." />
            <button type="submit">Search</button>
        </div>
    </form>
    <div class=" course"> 
        <div id="container"></div> 
    </div>



    <h3 id="subject"> </h2>
        <p id="title"> </p>
        <p id="coursedescription"> </p>
        <p id="units"> </p>
        <p id="instructor"> </p>
        <p id="email"> </p>
        <p id="location"> </p>
        <p id="prerequisites"> </p>
        <p id="meeting_start"> </p>
        <p id="meeting_end"> </p>
        <p id="weekdays"> </p>
    
</body>

<script> 
const input = document.querySelector('input[type="text"]');
input.addEventListener("input", (event) => {
    console.log(`The term searched for was ${input.value}`);
    let subjectTest; 
    let html = "";  
    fetch(`/search?searchTerm=${encodeURIComponent(input.value)}`, {
        method: 'GET',
        headers: {
            'Accept': 'application/json',
        },
    })
        .then(response => response.json())
        .then(data => {
            parsedData = data; //expects an array of objects
            if (!data || data.length === 0){
                console.log(data);
                console.log("No results found");
                document.getElementById("container").innerHTML = "<p>No results found</p>";
                return;
            }
            //clear previous results
            empty = document.getElementById("container");
            if (input.value === "") {
                empty.innerHTML = "Search something...";
            }

            
            
            

           
            parsedData.forEach(courses => { //expects an array of objects
                html +=  `<div class="container">
                            <h2>Subject: ${courses.subject}</h2>
                            <h3> ${courses.title}</h3>
                            <p>Course Description: ${courses.coursedescription}</p>
                            <p>Units: ${courses.units}</p>
                            <p><b>Instructor: ${courses.instructor}</b></p>
                            <p><b>Email: ${courses.email}</b></p>
                            <p><b> Location: ${courses.location}</b></p>
                            <p>Prerequisites: ${courses.courseprereq}</p>
                            <p>Meeting Start: ${courses.meeting_start}</p>
                            <p>Meeting End: ${courses.meeting_end}</p>
                            <p>Weekdays: ${courses.weekdays}</p>
                         
                            <a class= "btn btn-primary" href="http://localhost:8000/id.php?courseId=${courses.id}" role="button">View</a>

                            <br>
                            <hr> 
                        </div>`;
    
        
                
            })

            document.getElementById("container").innerHTML = html;
            //console.log(parsedData)
           // test = subjectTest[0].subject
            //test1 = JSON.stringify(parsedData)
            //console.log(subjectTest[0].subject)  //access obj properties 
            //document.getElementById("results").innerHTML = test;
            //console.log(test1);
            //document.getElementById("results").innerHTML = test1;
            /* 
            for (results in parsedData) {
                console.log(parsedData[results].subject);
                console.log(parsedData[results].subject);
                document.getElementById("subject").innerHTML += parsedData[results].subject + "<br>";
                document.getElementById("title").innerHTML += parsedData[results].title + "<br>";
                document.getElementById("coursedescription").innerHTML += parsedData[results].coursedescription + "<br>";
                document.getElementById("units").innerHTML += parsedData[results].units + "<br>";
                document.getElementById("instructor").innerHTML += parsedData[results].instructor + "<br>";
                document.getElementById("email").innerHTML += parsedData[results].email + "<br>";
                document.getElementById("location").innerHTML += parsedData[results].location + "<br>";
                document.getElementById("prerequisites").innerHTML += parsedData[results].prerequisites + "<br>";
                document.getElementById("meeting_start").innerHTML += parsedData[results].meeting_start + "<br>";
                document.getElementById("meeting_end").innerHTML += parsedData[results].meeting_end + "<br>";
                document.getElementById("weekdays").innerHTML += parsedData[results].weekdays + "<br>";
                

            } */ 



        })
        .catch(error => console.log(error));
        //if (!response.ok) {
        //    throw new Error('Network response was not ok');
        //}
        //if (response.length === 0) {
        //    throw new Error('No results found');
        //}
       
    
});


</script> 

</html>